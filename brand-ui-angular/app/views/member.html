<section class="content-header">
    <h1>
        会员管理
    </h1>
    <ol class="breadcrumb">
        <li><a href=""><i class="fa fa-hand-spock-o"></i>会员</a></li>
        <li class="active">会员管理</li>
    </ol>
</section>
<section class="content">
    <div class="box box-default">
        <form class="form-horizontal">
            <div class="box-body">
                <div class="form-group">
                    <label for="brandId" class="col-md-2 control-label">品牌ID</label>
                    <div class="col-md-4">
                        <input type="text" ng-model="brandId" class="form-control" id="brandId" placeholder="品牌ID" style="width: 80%">
                    </div>
                    <label for="memberId" class="col-md-2 control-label">会员ID</label>
                    <div class="col-md-4">
                        <input type="text" ng-model="memberId" class="form-control" id="memberId" placeholder="会员ID" style="width: 80%">
                    </div>
                    <br/><br/>
                    <label for="memberName" class="col-md-2 control-label">会员姓名</label>
                    <div class="col-md-4">
                        <input type="text" ng-model="memberName" class="form-control" id="memberName" placeholder="会员姓名" style="width: 80%">
                    </div>
                    <label for="phone" class="col-md-2 control-label">手机号</label>
                    <div class="col-md-4">
                        <input type="text" ng-model="phone" class="form-control" id="phone" placeholder="手机号" style="width: 80%">
                    </div>
                    <br/><br/>
                    <label for="source" class="col-md-2 control-label">门店</label>
                    <div class="col-md-4">
                        <select class="form-control" id="source" ng-model="source" style="width: 80%" ng-options="store.storeId as store.storeName for store in stores">
                            <option value="">--请选择--</option>
                        </select>
                    </div>
                    <label for="sorts" class="col-md-2 control-label">排序</label>
                    <div class="col-md-4">
                        <select class="form-control" id="sorts" ng-model="sortss" ng-options="c.name as c.value for c in wsorts" style="width: 80%">
                            <option value="">--请选择--</option>
                        </select>
                    </div>
                    <br/><br/>
                    <label class="col-md-2 control-label">创建时间</label>
                    <div class="col-md-4">
                        <input class="col-xs-6" type="text" ng-model="datetime_begin" id="datetime_begin" value="" readonly/>
                        <input class="col-xs-6" type="text" ng-model="datetime_end" id="datetime_end" value="" readonly/>
                    </div><br/>

                    <div class="col-md-12">

                        <button type="submit" ng-click="qureyMember(brandId,memberId,memberName,source,sortss,phone,datetime_begin,datetime_end,1);" class="btn btn-info pull-right">查询</button>
                        <button type="reset" class="btn btn-info pull-right">重置</button>
                    </div>

                </div>
            </div>
        </form>
        <div class="box-body">
            <table class="table table-bordered table-hover">
                <thead>
                <tr>
                    <th><a class="none-decoration" href="" ng-click="sortPages('pageType');">序号<div ng-class="page_style_pageType"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('pageType');">会员ID<div ng-class="page_style_pageType"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('count');">姓名<div ng-class="page_style_count"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('loadTime');">性别<div ng-class="page_style_loadTime"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('loadTime');">手机号<div ng-class="page_style_loadTime"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('loadTime');">最近消费时间<div ng-class="page_style_loadTime"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('loadTime');">到店次数<div ng-class="page_style_loadTime"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('loadTime');">消费次数<div ng-class="page_style_loadTime"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('loadTime');">消费总额<div ng-class="page_style_loadTime"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('loadTime');">平均单笔消费<div ng-class="page_style_loadTime"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('loadTime');">状态<div ng-class="page_style_loadTime"></div></a></th>
                    <th><a class="none-decoration" href="" ng-click="sortPages('loadTime');">操作<div ng-class="page_style_loadTime"></div></a></th>
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="user in userList | orderBy:predicate:reverse">
                    <td><div class="page-col-common">{{$index+1}}</div></td>
                    <td><div class="page-col-common">{{user.userId}}</div></td>
                    <td><a href="#/memberDetail?id={{user.userId}}&brandid={{brandId}}"><div class="page-col-common">{{user.name}}</div></a></td>
                    <td><div  ng-if="user.gender==0" class="page-col-common">男</div>
                        <div  ng-if="user.gender==1" class="page-col-common">女</div>
                        <div  ng-if="user.gender==2" class="page-col-common">保密</div>
                        <div class="page-col-common" ng-click=""></div></td>
                    <td><div class="page-col-common">{{user.phone}}</div></td>
                    <td><div class="page-col-common">{{user.lastTime}}</div></td>
                    <td><div class="page-col-common">{{user.times}}</div></td>
                    <td><div class="page-col-common">{{user.times}}</div></td>
                    <td><div class="page-col-common">￥{{user.total}}</div></td>
                    <td><div class="page-col-common">￥{{user.avg}}</div></td>
                    <td ng-if="user.status==0"><div class="page-col-common">启用</div></td>
                    <td ng-if="user.status==1"><div class="page-col-common">禁用</div></td>
                    <td><button ng-click="jinYong(user.memberId,0,brandId,memberId,name,sortss,phone,beginTime,endTime,page)" ng-if="user.status==1" class="btn btn-info pull-right">启用</button>
                        <button ng-click="jinYong(user.memberId,1,brandId,memberId,name,sortss,phone,beginTime,endTime,page)" ng-if="user.status==0" class="btn btn-info pull-right">禁用</button></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>

    <div class="col-sm-7">

        <div class="dataTables_paginate paging_simple_numbers" id="example2_paginate">
            <ul class="pagination" ng-repeat="pn in pageNum">
                <li ng-if="page==1&& $index==0" class="paginate_button previous disabled" id="example2_previous"><a
                                                                                        aria-controls="example2"
                                                                                        data-dt-idx="0" tabindex="0">上一页</a>
                </li>
                <li ng-if="page!=1&& $index==0" ng-click="qureyMember(brandId,memberId,name,source,sortss,phone,beginTime,endTime,page-1);" class="paginate_button previous" id="example_previous"><a
                                                                                                             aria-controls="example2"
                                                                                                             data-dt-idx="0" tabindex="0">上一页</a>
                </li>
                <li ng-if="pn==page" class="paginate_button active"><a aria-controls="example2" data-dt-idx="1"
                                                      tabindex="0">{{pn}}</a></li>
                <li ng-if="pn!=page" class="paginate_button"><a ng-click="qureyMember(brandId,memberId,name,source,sortss,phone,beginTime,endTime,pn);" aria-controls="example2" data-dt-idx="1"
                                                                           tabindex="0">{{pn}}</a></li>

                <li ng-if="$index==9&&page!=pageCount" ng-click="qureyMember(brandId,memberId,name,source,sortss,phone,beginTime,endTime,page+1);" class="paginate_button next" id="example2_next"><a aria-controls="example2" data-dt-idx="7"
                                                                       tabindex="0">下一页</a></li>
                <li ng-if="pageCount<10&&pn==pageCount&&page<pageCount" ng-click="qureyMember(brandId,memberId,name,source,sortss,phone,beginTime,endTime,page+1);" class="paginate_button next" id="example0_next"><a aria-controls="example2" data-dt-idx="7"
                                                                       tabindex="0">下一页</a></li>
                <li ng-if="$index==9&&page==pageCount" class="paginate_button next disabled" id="example1_next"><a aria-controls="example2" data-dt-idx="7"
                                                                                                                      tabindex="0">下一页</a></li>
                <li ng-if="pageCount<10&&pn==pageCount&&page==pageCount" class="paginate_button next disabled" id="example_next"><a aria-controls="example2" data-dt-idx="7"
                                                                                                                  tabindex="0">下一页</a></li>
            </ul>
        </div>
    </div>
    <div class="pull-right"><b>共 {{pageCount}} 页</b></div>
</section>